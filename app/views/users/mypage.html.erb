<% provide(:title, 'マイページ') %>

<div class="my-4">
  
  <%# アカウント名 %>
  <h1 class="h5"><%= @user.name %></h1>

  <%# 登録情報 %>
  <div class="mb-4">
    <div class="email">
      <span class="badge badge-pill badge-secondary">
        Email
      </span>
      <%= @user.email %>
    </div>

    <div class="d-flex justify-content-end">
      <%= link_to '登録情報を変更', edit_user_path(@user),
                                    class: "inline-block btn btn-outline-secondary btn-sm",
                                    role: "button" %>
    </div>
  </div>

  <%# ウォッチリスト登録中の企業 %>
  <div class="mb-4">
    <%= link_to '/feed/watchlist', class: "btn btn-secondary btn-block ",
                                        role: "button" do %>
      <%= icon 'fas', 'building' %>
      ウォッチリスト
      <span class="badge badge-pill badge-light">
      <%= @user.watchlists.count %>社
      </span>
    <% end %>
  </div>

  <%# TDリスト（ウォッチリスト） %>
  <div class="mb-4">
    <%= link_to feed_path, class: "btn btn-secondary btn-block mb-2",
                            role: "button" do %>
      <%= icon 'fas', 'rss' %>
      TDフィード
    <% end %>

    <%= render 'shared/td_list' %>
    
    <%= link_to feed_path, class: "text-muted d-flex justify-content-end my-2 align-middle" do %>
      <span class="small mr-1">もっと見る</span>
      <%= icon 'fas', 'angle-right' %>
    <% end %>
  </div>

  <%# ログアウト・アカウント削除 %>
  <div class="destroy-content mt-5 mb-4">
    <%= link_to '/logout', 
                class: "btn btn-secondary btn-block btn-sm",
                method: :delete,
                role: "button" do %>
      <%= icon( "fas", "sign-out-alt") %>
      ログアウト
    <% end %>
    <%= link_to @user, 
                method: :delete,
                class: "btn btn-outline-danger btn-block btn-sm",
                role: "button",
                data: { confirm: "本当にアカウントを削除しますか？この操作はやり直すことができません。" } do %>
      アカウントを削除
    <% end %>
  </div>
</div>